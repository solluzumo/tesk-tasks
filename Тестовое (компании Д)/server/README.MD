# Простое Rest API приложение

Асинхронное веб-приложение для управления счетами и обработки платежных вебхуков.

## Стек технологий
* **Python 3.10+** (Asyncio)
* **Framework:** Sanic (или ваш вариант, например, FastAPI)
* **Database:** PostgreSQL
* **ORM:** SQLAlchemy 2.0 (Interface: async)
* **Migrations:** Alembic
* **Containerization:** Docker / Docker Compose

---

## Архитектура системы сущностей


## Функционал

### Пользователь
- Авторизация (JWT/Session).
- Просмотр профиля.
- Список своих счетов и история пополнений.

### Администратор
- Управление пользователями (CRUD).
- Мониторинг балансов всех пользователей.

### Платежный вебхук
Реализован роут `/api/webhook/payment`, который:
1. Проверяет подпись `SHA256` по формуле: `hash(account_id + amount + transaction_id + user_id + secret_key)`.
2. Гарантирует идемпотентность (обработка транзакции с одним `transaction_id` только один раз).
3. Автоматически создает счет, если он указан в вебхуке, но отсутствует в БД.

---

## Быстрый запуск

### Docker Compose
Система будет доступна на порту `8000`.

1. Выполните команду:
   ```bash
   docker-compose up --buildТЗ
   ```